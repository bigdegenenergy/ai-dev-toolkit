# ⚠️ REVIEW INSTRUCTIONS

> **DELETE THIS FILE** after reading and addressing the issues.
> This file was generated by the Review Agent (Gemini).

## Workflow

1. Read the issues below
2. Fix the code
3. **DELETE this file** (`git rm REVIEW_INSTRUCTIONS.md`)
4. Commit with `Agent-Note:` trailer explaining your fixes

## Example Commit

```
fix: address review feedback

Agent-Note: Fixed SQL injection in auth.ts by using parameterized queries.
```

---

## Issues to Address

```toml
[review]
summary = "The refactor to a git-native agent workflow is conceptually sound but contains a critical configuration error (invalid model name) and significant CI stability risks regarding git operations (race conditions and potential upstream branch pollution)."
decision = "REQUEST_CHANGES"

[[issues]]
severity = "critical"
file = ".github/workflows/gemini-pr-review-plus.yml"
line = 70
title = "Invalid Gemini Model Name"
description = "'gemini-3-pro-preview' is likely a hallucinated model name (current version is 1.5). The agent notes claim this fixed a 404, but this specific string will likely cause a persistent 400/404 error with the Google GenAI API."
suggestion = "Use a valid model identifier such as 'gemini-1.5-pro' or 'gemini-exp-1206'."

[[issues]]
severity = "important"
file = ".github/workflows/gemini-pr-review-plus.yml"
line = 157
title = "Git Push Race Condition & Fork Misconfiguration"
description = "The 'Push Instructions' step has two flaws: 1) It does not pull/rebase before pushing, causing failure if the branch advanced during the review. 2) For PRs from forks, `origin` points to the base repository, causing the workflow to create/overwrite a branch on the base repo instead of updating the fork."
suggestion = "Add `git pull --rebase origin ${{ github.head_ref }}` before pushing. For forks, this workflow requires explicit remote handling or should be restricted to internal PRs."

[[issues]]
severity = "important"
file = ".github/workflows/gemini-pr-review-plus.yml"
line = 104
title = "Fail-Open Approval Logic"
description = "The decision logic defaults to 'APPROVED' if 'REVIEW_INSTRUCTIONS.md' is missing. If the Python review script crashes or fails specifically before writing the file (but exits with 0), the PR will be incorrectly approved."
suggestion = "Capture the python script's output/exit code explicitly. Only approve if the script confirms 'No Issues' rather than relying on the absence of a file."
```
